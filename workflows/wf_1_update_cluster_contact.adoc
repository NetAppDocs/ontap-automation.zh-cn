---
sidebar: sidebar 
permalink: workflows/wf_1_update_cluster_contact.html 
keywords: workflow 
summary: 此工作流将更新集群联系信息。由于此请求是异步处理的，因此它还说明了如何确定后台作业是否成功完成。 
---
= 工作流 1 ：更新集群联系人并检查作业状态
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
此工作流将更新集群联系信息。由于此请求是异步处理的，因此它还说明了如何确定后台作业是否成功完成。



=== 1. 更新集群的联系信息

您可以通过问题描述调用来更新联系信息。由于此请求异步运行，因此您必须确认关联作业是否成功。

|===
| 类别 | HTTP 方法 | 路径 


| 集群 | patch | 集群 
|===
异步

.卷曲
[source, curl]
----
curl -X PATCH -H 'Content-Type: application/json' -u admin:password -k -d @step01 'https://10.222.81.101/api/cluster'
{
  "contact": "support@company-demo.com"
}
----
返回具有关联标识符的作业对象。

[source, json]
----
{ "job": {
  "uuid": "d877f5bb-3aa7-11e9-b6c6-005056a78c89",
  "_links": {
    "self": {
      "href": "/api/cluster/jobs/d877f5bb-3aa7-11e9-b6c6-005056a78c89"
    }
  }
  }
}
----


=== 2. 检索作业状态

您必须检索作业状态以确定异步请求是否已成功完成。

|===
| 类别 | HTTP 方法 | 路径 


| 集群 | 获取 | /cluster/Jobs/ ｛ uuid ｝ 
|===
同步

.卷曲
[source, curl]
----
curl -X GET -H 'Content-Type: application/json' -u admin:password -k 'https:// 10.222.81.101/api/cluster/jobs/*uuid*'
----
返回状态为和其他字段的作业对象。

[source, json]
----
{
  "uuid": "d877f5bb-3aa7-11e9-b6c6-005056a78c89",
  "description": "PATCH /api/cluster",
  "state": "success",
  "message": "success",
  "code": 0,
  "_links": {
    "self": {
      "href": "/api/cluster/jobs/d877f5bb-3aa7-11e9-b6c6-005056a78c89"
    }
  }
}
----